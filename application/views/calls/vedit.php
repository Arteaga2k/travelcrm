<div class="grid fieldscontainer"><script src="<?=base_url()?>public/js/jquery.timeentry.package-1.4.6/jquery.timeentry.min.js" type="text/javascript"></script><h3><?=$title?></h3><?= form_open(get_currcontroller()."/vedit/{$rid}", array('id'=>'edit_'.$orid, 'autocomplete'=>'off'))?><div class="container editform"><?=form_hidden('rid', $rid)?><?if(validation_errors()){?><div class="error">	<?=validation_errors('<div>', '</div>');?></div>	<?}?><?if($success===False){?><div class="error">	<?=lang('SAVE_SYSTEM_ERROR')?></div><?}?><?if($success===True){?><div class="success">	<?=lang('SAVE_SYSTEM_SUCCESS')?></div><?}?><fieldset>	<legend><?=lang('DOCUMENT')?></legend>	<div class="column span-4">		<?=form_label('Id', 'rid')?>	</div>	<div class="column span-4">		<?=form_input('rid', set_value('rid', $ds->rid), 'id="rid" class="text" readonly="readonly" style="width:90px;"')?>	</div>	<div class="column span-4">		<?=form_label(lang('DATE_DOC').required_field(), 'date_doc')?> 	</div>	<div class="column span-4">		<?=form_input('date_doc', date_conv(set_value('date_doc', $ds->date_doc)), 'id="date_doc" class="text date-entry"')?>		<script type="text/javascript">			$('#date_doc').dateEntry({dateFormat: '<?=$this->config->item('crm_date_entry_format')?>', spinnerImage:''});		</script>	</div>		<div class="column span-4">		<?=form_label(lang('TIME_DOC').required_field(), 'time_doc')?> 	</div>	<div class="column span-4 last">		<?=form_input('time_doc', date_conv(set_value('time_doc', $ds->date_doc), True), 'id="time_doc" class="text" readonly="readonly" style="width:45px;"')?>		<script type="text/javascript">			$('#time_doc').timeEntry({show24Hours: true, spinnerImage:''});		</script>	</div>	</fieldset><div class="column span-4">	<?=form_label(lang('ADVERTISE_SHORT').required_field(), 'source_name')?> </div><div class="column span-20 last">	<?=get_advertisessources_vp(set_value('_advertisessources_rid', $ds->_advertisessources_rid))?></div><div class="column span-4">	<?=form_label(lang('L_NAME'), 'l_name')?></div><div class="column span-20 last">	<?=form_input('l_name', set_value('l_name', $ds->l_name), 'id="l_name" class="text part-5"')?></div><div class="column span-4">	<?=form_label(lang('F_NAME').get_field_help('calls', 'F_NAME'), 'f_name')?> </div><div class="column span-20 last">	<?=form_input('f_name', set_value('f_name', $ds->f_name), 'id="f_name" class="text part-5"')?></div><div class="column span-4">	<?=form_label(lang('S_NAME'), 's_name')?></div><div class="column span-20 last">	<?=form_input('s_name', set_value('s_name', $ds->s_name), 'id="s_name" class="text part-5"')?></div><div class="column span-4">	<?=form_label(lang('CLIENT').get_field_help('calls', 'CLIENT'), '_clients_rid')?></div><div class="column span-20 last">	<?=get_clients_vp(set_value('_clients_rid', $ds->_clients_rid))?></div><div class="column span-4">	<?=form_label(lang('PHONES').required_field(), 'phones')?> </div><div class="column span-20 last">	<?=form_input('phones', set_value('phones', $ds->phones), 'id="phones" class="text part-5"')?></div><div class="column span-4">	<?=form_label(lang('EMAIL'), 'email')?></div><div class="column span-20 last">	<?=form_input('email', set_value('email', $ds->email), 'id="email" class="text part-5"')?></div><fieldset><legend><?=lang('TOUR_DETAILS')?></legend><div class="column span-4">	<?=lang('COUNTRIES_CUROURTS_LIST').get_field_help('calls', 'COUNTRIES_CUROURTS_LIST').required_field()?></div><div class="column span-20 last" id="cc_list_container">	<?=$cc_list?></div><div class="column span-24 last">	&nbsp;</div><div class="column span-4">	<?=form_label(lang('COUNTRY').get_field_help('calls', 'COUNTRY'), 'country_name')?> </div><div class="column span-8">	<?=form_dropdown('_countries_rid', get_countries_list(), null, 'id="_countries_rid" class="text" ')?></div><div class="column span-4">	<?=form_label(lang('CUROURT').get_field_help('calls', 'CUROURT'), 'curourt_name')?></div><div class="column span-8 last">	<?=get_curourts_vp(set_value('_curourts_rid', null))?></div><div class="column span-4">	&nbsp;</div><div class="column span-8">	<input type="button" value="<?=lang('ADD_COUNTRY_IN_LIST')?>" class="button" id="add_country" name="add_country"></div><div class="column span-4">	&nbsp;</div><div class="column span-8 last">	<input type="button" value="<?=lang('ADD_CUROURT_IN_LIST')?>" class="button" id="add_curourt" name="add_curourt"></div><div class="column span-24 last">	&nbsp;</div><div class="column span-4">	<?=form_label(lang('DATE_FROM').required_field(), 'date_from')?> </div><div class="column span-8">	<?=form_input('date_from', date_conv(set_value('date_from', $ds->date_from)), 'id="date_from" class="text date-entry"')?>	<script type="text/javascript">		$('#date_from').dateEntry({dateFormat: '<?=$this->config->item('crm_date_entry_format')?>', spinnerImage:''});	</script></div>	<div class="column span-4">	<?=form_label(lang('DATE_TO').required_field(), 'date_to')?> </div><div class="column span-8 last">	<?=form_input('date_to', date_conv(set_value('date_to', $ds->date_to)), 'id="date_to" class="text date-entry"')?>	<script type="text/javascript">		$('#date_to').dateEntry({dateFormat: '<?=$this->config->item('crm_date_entry_format')?>', spinnerImage:''});		</script></div><div class="column span-4">	<?=form_label(lang('HOTELCAT').required_field(), '_hotelscats_rid')?> </div><div class="column span-20 last">	<? foreach(get_hotelscats() as $cat) {?>	<?=form_checkbox('_hotelscats_rid[]', $cat->rid, $this->input->post('_hotelscats_rid')?in_array($cat->rid, $this->input->post('_hotelscats_rid')):in_array($cat->rid, $sub_ds), 'id="_hotelscats_rid[]"')?> <span style="margin-right: 15px;"><?=$cat->hotelcat_name?></span>	<? } ?></div>	<div class="column span-4">	<?=form_label(lang('FOOD').required_field(), '_food_rid')?> </div><div class="column span-20 last">	<? foreach(get_food() as $food) {?>	<?=form_checkbox('_food_rid[]', $food->rid, $this->input->post('_food_rid')?in_array($food->rid, $this->input->post('_food_rid')):in_array($food->rid, $food_ds), 'id="_food_rid[]"')?><?=$food->food_name?><br>	<? } ?></div>	<div class="column span-4">	<?=form_label(lang('SUM_TO').required_field(), 'sum_wanted_to')?> </div><div class="column span-20 last">	<?=form_input('sum_wanted_to', set_value('sum_wanted_to', $ds->sum_wanted_to), 'id="sum_wanted_to" class="text part-2"')?></div><div class="column span-4">	<?=form_label(lang('CURRENCY').required_field(), '_currencies_rid')?> </div><div class="column span-20 last">	<?=form_dropdown('_currencies_rid', get_currencies(), set_value('_currencies_rid', $ds->_currencies_rid), 'id="_currencies_rid" class="text" ')?></div><div class="column span-4">	<?=form_label(lang('TOURISTS_QUAN').required_field(), 'tourists_quan')?> </div><div class="column span-20 last">	<?=form_input('tourists_quan', set_value('tourists_quan', $ds->tourists_quan), 'id="tourists_quan" class="text part"')?><?=lang('ADULT_QUAN')?>	<?=form_input('chields_quan', set_value('chields_quan', $ds->chields_quan), 'id="chields_quan" class="text part"')?><?=lang('CHIELD_QUAN')?></div></fieldset><fieldset><legend><?=lang('TALK')?></legend><div class="column span-4">	<?=form_label(lang('TOURISTS_WISH').required_field(), 'tourists_wish')?> </div><div class="column span-20 last">	<?=form_textarea('tourists_wish', set_value('tourists_wish', $ds->tourists_wish), 'id="tourists_wish" class="text" style="width: 400px; height:60px;"')?></div><div class="column span-4">	<?=form_label(lang('TOURISTS_OFFERS').required_field(), 'tourists_offers')?> </div><div class="column span-20 last">	<?=form_textarea('tourists_offers', set_value('tourists_offers', $ds->tourists_offers), 'id="tourists_offers" class="text" style="width: 400px; height:60px;"')?></div><div class="column span-4">	<?=form_label(lang('TOURISTS_ANSWERS').required_field(), 'tourists_answers')?> </div><div class="column span-20 last">	<?=form_textarea('tourists_answers', set_value('tourists_answers', $ds->tourists_answers), 'id="tourists_answers" class="text" style="width: 400px; height:60px;"')?></div></fieldset><div class="column span-4">	<?=form_label(lang('ARCHIVE'), 'archive')?></div><div class="column span-20 last">	<?=form_dropdown('archive', array('0'=>lang('NO'), '1'=>lang('YES')), set_value('archive', $ds->archive), 'id="archive" class="text"')?></div><div class="column span-4">	<?=form_label(lang('DESCR'), 'descr')?></div><div class="column span-20 last">	<?=form_textarea('descr', set_value('descr', $ds->descr), 'id="descr" class="text" style="width:300px; height: 50px;"')?></div></div><div class="column span-24 last controls">	<input type="submit" value="<?=lang('SAVE')?>" class="button" id="submit" name="submit"> <input type="reset" value="<?=lang('CANCEL')?>" class="button" onclick="window.location='<?=site_url(get_currcontroller().'/vjournal/go/') ?>';" id="reset" name="reset">	<button onclick="joinToParent('<?=$ds->$jtp['val']?>', '<?=$ds->$jtp['scr']?>')" class="button"><?=lang('SELECT')?></button></div>
<?= form_close(); ?>
</div><script type="text/javascript">function joinToParent(val, scr){	$("input[name='<?=$jtp['val_p']?>']", window.opener.document).val(val);	$('#<?=$jtp['scr_p']?>', window.opener.document).val(scr);	this.close();	return;}	function list_processing(mode, rid){		if(!rid) return;		var query_string = '';		if(mode=='add_country')	$('#cc_list_container').append('<input type="hidden" name="_countries_rids[]" value="'+rid+'">');		if(mode=='remove_country')	$('input[type="hidden"][name="_countries_rids[]"][value="'+rid+'"]').remove();		if(mode=='add_curourt')	$('#cc_list_container').append('<input type="hidden" name="_curourts_rids[]" value="'+rid+'">');		if(mode=='remove_curourt')	$('input[type="hidden"][name="_curourts_rids[]"][value="'+rid+'"]').remove();		if($('input[name="_countries_rids[]"]').serialize())			query_string += '&'+$('input[name="_countries_rids[]"]').serialize();		if($('input[name="_curourts_rids[]"]').serialize())			query_string += '&'+$('input[name="_curourts_rids[]"]').serialize(); 		$.ajax({			url:'<?=site_url(get_currcontroller()) ?>/l_pr',			data: query_string,			type: 'POST',			success: function(response){				$('#cc_list_container').html(response);			}		});	}	$(document).ready(function(){		$('#add_country').click(function(){			list_processing('add_country', $('#_countries_rid').val());		});		$('#add_curourt').click(function(){			list_processing('add_curourt', $('input[name="_curourts_rid"]').val());		});	});</script>